<script>
firebase.initializeApp({
  apiKey: "AIzaSyDvCoFrxTR4ytDVLBpiMArHzdc_AiYBkMU",
  authDomain: "hyper-e2e9f.firebaseapp.com",
  databaseURL: "https://hyper-e2e9f-default-rtdb.firebaseio.com",
  projectId: "hyper-e2e9f",
  storageBucket: "hyper-e2e9f.firebasestorage.app",
  messagingSenderId: "995423221322",
  appId: "1:995423221322:web:20be1f7e6f4827134798b3"
});

const ref = firebase.database().ref("cursor");
const mb = document.getElementById("mb");

let x = 0, y = 0;

// Desktop
document.addEventListener("mousemove", e => {
  x = e.clientX - 25;
  y = e.clientY - 25;
}, { passive: true });

// Mobile
document.addEventListener("touchstart", handleTouch, { passive: true });
document.addEventListener("touchmove", handleTouch, { passive: true });

function handleTouch(e) {
  const t = e.touches[0];
  if (!t) return;
  x = t.clientX - 25;
  y = t.clientY - 25;
}

// Send position
function send() {
  ref.set({ x, y });
  requestAnimationFrame(send);
}
requestAnimationFrame(send);

// Receive position
ref.on("value", s => {
  const p = s.val();
  if (!p) return;
  mb.style.transform = `translate3d(${p.x}px, ${p.y}px, 0)`;
});
</script>
